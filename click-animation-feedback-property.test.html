<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Test: Click Animation Feedback</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f8fafc;
        }
        .test-container {
            background: white;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        h1 {
            color: #0891b2;
            margin-bottom: 8px;
        }
        .test-info {
            color: #64748b;
            margin-bottom: 24px;
            padding: 12px;
            background: #f1f5f9;
            border-radius: 4px;
        }
        .test-results {
            margin-top: 20px;
        }
        .test-case {
            padding: 12px;
            margin: 8px 0;
            border-radius: 4px;
            border-left: 4px solid #94a3b8;
            background: #f8fafc;
        }
        .test-case.pass {
            border-left-color: #10b981;
            background: #f0fdf4;
        }
        .test-case.fail {
            border-left-color: #ef4444;
            background: #fef2f2;
        }
        .summary {
            margin-top: 24px;
            padding: 16px;
            border-radius: 8px;
            font-weight: 600;
        }
        .summary.pass {
            background: #d1fae5;
            color: #065f46;
        }
        .summary.fail {
            background: #fee2e2;
            color: #991b1b;
        }
        #run-test {
            background: #0891b2;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        #run-test:hover {
            background: #0e7490;
            transform: translateY(-2px);
        }
        #run-test:disabled {
            background: #94a3b8;
            cursor: not-allowed;
            transform: none;
        }
        .test-element {
            margin: 10px;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .test-button {
            background: #0891b2;
            color: white;
            border: none;
            position: relative;
            overflow: hidden;
        }
        .test-button:active {
            transform: translateY(0) scale(0.98);
        }
        .test-card {
            background: white;
            border: 1px solid #e2e8f0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .test-card:active {
            transform: translateY(-2px) scale(1.01);
        }
        .test-link {
            background: #f1f5f9;
            color: #0891b2;
            text-decoration: none;
            display: inline-block;
        }
        .test-link:active {
            transform: translateX(6px) scale(0.98);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ðŸ§ª Property Test: Click Animation Feedback</h1>
        <div class="test-info">
            <strong>Feature:</strong> gozde-eksi-portfolio-website, Property 21: Click Animation Feedback<br>
            <strong>Validates:</strong> Requirements 9.3<br>
            <strong>Property:</strong> For any clickable element (button, link, card), clicking should trigger a visual animation or transition (ripple effect, scale, color change).<br>
            <strong>Iterations:</strong> 100 (testing multiple element types and click scenarios)
        </div>
        
        <button id="run-test">Run Property Test</button>
        
        <div id="test-results" class="test-results"></div>
    </div>

    <script>
        /**
         * Property Test: Click Animation Feedback
         * Tests that clicking any clickable element triggers visual feedback
         */

        // Test configuration
        const TEST_ITERATIONS = 100;
        const ANIMATION_CHECK_DELAY = 50; // ms to wait for animation to start
        const TRANSFORM_RESET_DELAY = 200; // ms to wait for transform to reset

        // Element types to test
        const ELEMENT_TYPES = [
            { type: 'button', class: 'test-button', expectedTransform: 'scale(0.98)' },
            { type: 'card', class: 'test-card', expectedTransform: 'scale(1.01)' },
            { type: 'link', class: 'test-link', expectedTransform: 'scale(0.98)' }
        ];

        let testResults = [];
        let testsPassed = 0;
        let testsFailed = 0;

        /**
         * Create a test element of specified type
         */
        function createTestElement(elementType) {
            const element = document.createElement(elementType.type === 'link' ? 'a' : 'div');
            element.className = `test-element ${elementType.class}`;
            element.textContent = `Test ${elementType.type}`;
            element.style.display = 'inline-block';
            
            if (elementType.type === 'link') {
                element.href = '#';
            }
            
            if (elementType.type === 'button') {
                element.setAttribute('role', 'button');
            }
            
            document.body.appendChild(element);
            return element;
        }

        /**
         * Get computed transform value
         */
        function getTransform(element) {
            const style = window.getComputedStyle(element);
            return style.transform;
        }

        /**
         * Check if transform has changed from initial state
         */
        function hasTransformChanged(initialTransform, currentTransform) {
            // 'none' means no transform applied
            if (initialTransform === 'none' && currentTransform !== 'none') {
                return true;
            }
            
            // Check if transform matrix has changed
            if (initialTransform !== currentTransform) {
                return true;
            }
            
            return false;
        }

        /**
         * Simulate click and check for animation feedback
         */
        async function testClickAnimation(element, elementType, iteration) {
            return new Promise((resolve) => {
                // Get initial transform
                const initialTransform = getTransform(element);
                
                // Simulate click
                const clickEvent = new MouseEvent('click', {
                    bubbles: true,
                    cancelable: true,
                    view: window
                });
                
                element.dispatchEvent(clickEvent);
                
                // Check for transform change after a short delay
                setTimeout(() => {
                    const transformDuringClick = getTransform(element);
                    const hasAnimation = hasTransformChanged(initialTransform, transformDuringClick);
                    
                    const result = {
                        iteration,
                        elementType: elementType.type,
                        passed: hasAnimation,
                        initialTransform,
                        transformDuringClick,
                        message: hasAnimation 
                            ? `âœ“ Click on ${elementType.type} triggered transform change`
                            : `âœ— Click on ${elementType.type} did NOT trigger transform change`
                    };
                    
                    resolve(result);
                }, ANIMATION_CHECK_DELAY);
            });
        }

        /**
         * Run a single test iteration
         */
        async function runTestIteration(iteration) {
            // Randomly select an element type to test
            const elementType = ELEMENT_TYPES[Math.floor(Math.random() * ELEMENT_TYPES.length)];
            
            // Create test element
            const element = createTestElement(elementType);
            
            // Test click animation
            const result = await testClickAnimation(element, elementType, iteration);
            
            // Clean up
            element.remove();
            
            return result;
        }

        /**
         * Run all test iterations
         */
        async function runAllTests() {
            const runButton = document.getElementById('run-test');
            const resultsContainer = document.getElementById('test-results');
            
            runButton.disabled = true;
            runButton.textContent = 'Running tests...';
            resultsContainer.innerHTML = '<p>Running property-based tests...</p>';
            
            testResults = [];
            testsPassed = 0;
            testsFailed = 0;
            
            // Run tests sequentially to avoid interference
            for (let i = 1; i <= TEST_ITERATIONS; i++) {
                const result = await runTestIteration(i);
                testResults.push(result);
                
                if (result.passed) {
                    testsPassed++;
                } else {
                    testsFailed++;
                }
                
                // Update progress
                if (i % 10 === 0) {
                    resultsContainer.innerHTML = `<p>Progress: ${i}/${TEST_ITERATIONS} tests completed...</p>`;
                }
            }
            
            // Display results
            displayResults();
            
            runButton.disabled = false;
            runButton.textContent = 'Run Property Test Again';
        }

        /**
         * Display test results
         */
        function displayResults() {
            const resultsContainer = document.getElementById('test-results');
            
            let html = '<h3>Test Results</h3>';
            
            // Show summary
            const allPassed = testsFailed === 0;
            html += `
                <div class="summary ${allPassed ? 'pass' : 'fail'}">
                    ${allPassed ? 'âœ“ ALL TESTS PASSED' : 'âœ— SOME TESTS FAILED'}<br>
                    Passed: ${testsPassed}/${TEST_ITERATIONS} | Failed: ${testsFailed}/${TEST_ITERATIONS}
                </div>
            `;
            
            // Show failed tests (if any)
            if (testsFailed > 0) {
                html += '<h4>Failed Tests:</h4>';
                testResults.filter(r => !r.passed).forEach(result => {
                    html += `
                        <div class="test-case fail">
                            <strong>Iteration ${result.iteration}:</strong> ${result.message}<br>
                            <small>Element: ${result.elementType} | Initial: ${result.initialTransform} | During Click: ${result.transformDuringClick}</small>
                        </div>
                    `;
                });
            }
            
            // Show sample of passed tests
            html += '<h4>Sample Passed Tests (first 10):</h4>';
            testResults.filter(r => r.passed).slice(0, 10).forEach(result => {
                html += `
                    <div class="test-case pass">
                        <strong>Iteration ${result.iteration}:</strong> ${result.message}<br>
                        <small>Element: ${result.elementType} | Transform changed from "${result.initialTransform}" to "${result.transformDuringClick}"</small>
                    </div>
                `;
            });
            
            // Element type breakdown
            const buttonTests = testResults.filter(r => r.elementType === 'button');
            const cardTests = testResults.filter(r => r.elementType === 'card');
            const linkTests = testResults.filter(r => r.elementType === 'link');
            
            html += '<h4>Breakdown by Element Type:</h4>';
            html += `
                <div class="test-case">
                    <strong>Buttons:</strong> ${buttonTests.filter(r => r.passed).length}/${buttonTests.length} passed<br>
                    <strong>Cards:</strong> ${cardTests.filter(r => r.passed).length}/${cardTests.length} passed<br>
                    <strong>Links:</strong> ${linkTests.filter(r => r.passed).length}/${linkTests.length} passed
                </div>
            `;
            
            resultsContainer.innerHTML = html;
        }

        // Add event listener
        document.getElementById('run-test').addEventListener('click', runAllTests);
    </script>
</body>
</html>
