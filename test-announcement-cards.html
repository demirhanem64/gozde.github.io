<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test: Announcement Cards</title>
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <style>
        body {
            padding: 2rem;
            background-color: var(--color-background);
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .test-results {
            margin-top: 2rem;
            padding: 1.5rem;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .test-item {
            padding: 0.75rem;
            margin: 0.5rem 0;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .test-pass {
            background-color: #d1fae5;
            color: #065f46;
        }
        .test-fail {
            background-color: #fee2e2;
            color: #991b1b;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1 style="color: var(--color-turquoise); margin-bottom: 0.5rem;">üß™ Announcement Cards Test</h1>
            <p style="color: var(--color-text-light);">Testing task 4.2: Announcement card component implementation</p>
        </div>

        <section id="announcements-section" class="announcements-section">
            <div class="announcements-header" style="text-align: center; margin-bottom: 2rem;">
                <div style="display: inline-flex; align-items: center; gap: 0.75rem; background: linear-gradient(135deg, #f0fdfa, #fff7ed); padding: 1rem 2rem; border-radius: 20px; box-shadow: 0 4px 12px rgba(8,145,178,0.1);">
                    <span style="font-size: 2rem;">üì¢</span>
                    <h2 style="margin: 0; background: linear-gradient(135deg, #0891b2, #f97316); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-size: 2rem;">Duyurular</h2>
                </div>
            </div>
            
            <div id="announcements-container" class="announcements-container">
                <!-- Announcement cards will be dynamically rendered here -->
            </div>
        </section>

        <div class="test-results">
            <h3 style="color: var(--color-turquoise); margin-bottom: 1rem;">Test Results</h3>
            <div id="test-output"></div>
        </div>
    </div>

    <script src="js/announcements.js"></script>
    <script>
        // Run tests after page loads
        window.addEventListener('load', () => {
            const output = document.getElementById('test-output');
            const tests = [];

            // Test 1: Check if announcements container exists
            const container = document.getElementById('announcements-container');
            tests.push({
                name: 'Announcements container exists',
                pass: container !== null
            });

            // Test 2: Check if announcement cards are rendered
            const cards = container.querySelectorAll('.announcement-card');
            tests.push({
                name: 'Announcement cards are rendered',
                pass: cards.length > 0,
                details: `Found ${cards.length} cards`
            });

            // Test 3: Check if cards have required elements
            if (cards.length > 0) {
                const firstCard = cards[0];
                const hasTitle = firstCard.querySelector('.announcement-title') !== null;
                const hasDate = firstCard.querySelector('.announcement-date') !== null;
                const hasTime = firstCard.querySelector('.announcement-time') !== null;
                const hasSummary = firstCard.querySelector('.announcement-summary') !== null;
                const hasFooter = firstCard.querySelector('.announcement-card-footer') !== null;
                
                tests.push({
                    name: 'Card has title element',
                    pass: hasTitle
                });
                tests.push({
                    name: 'Card has date element',
                    pass: hasDate
                });
                tests.push({
                    name: 'Card has time element',
                    pass: hasTime
                });
                tests.push({
                    name: 'Card has summary element',
                    pass: hasSummary
                });
                tests.push({
                    name: 'Card has footer with "Devamƒ±nƒ± Oku"',
                    pass: hasFooter
                });
            }

            // Test 4: Check if cards have click handlers
            if (cards.length > 0) {
                const firstCard = cards[0];
                const hasOnClick = firstCard.hasAttribute('onclick');
                tests.push({
                    name: 'Card has click handler',
                    pass: hasOnClick
                });
            }

            // Test 5: Check if cards have proper ARIA attributes
            if (cards.length > 0) {
                const firstCard = cards[0];
                const hasRole = firstCard.getAttribute('role') === 'button';
                const hasTabIndex = firstCard.hasAttribute('tabindex');
                const hasAriaLabel = firstCard.hasAttribute('aria-label');
                
                tests.push({
                    name: 'Card has role="button"',
                    pass: hasRole
                });
                tests.push({
                    name: 'Card has tabindex for keyboard navigation',
                    pass: hasTabIndex
                });
                tests.push({
                    name: 'Card has aria-label',
                    pass: hasAriaLabel
                });
            }

            // Test 6: Check if "Yeni" badge appears on recent announcements
            const newBadges = container.querySelectorAll('.announcement-badge');
            tests.push({
                name: '"Yeni" badge system is working',
                pass: true, // Badge may or may not appear depending on dates
                details: `Found ${newBadges.length} "Yeni" badges`
            });

            // Test 7: Check if cards are sorted by date (newest first)
            const manager = new AnnouncementManager();
            const announcements = manager.getSortedByDate();
            let isSorted = true;
            for (let i = 0; i < announcements.length - 1; i++) {
                const current = new Date(announcements[i].date + ' ' + announcements[i].time);
                const next = new Date(announcements[i + 1].date + ' ' + announcements[i + 1].time);
                if (current < next) {
                    isSorted = false;
                    break;
                }
            }
            tests.push({
                name: 'Cards are sorted by date (newest first)',
                pass: isSorted
            });

            // Test 8: Check if hover effects are defined in CSS
            const styles = getComputedStyle(cards[0]);
            tests.push({
                name: 'Card has transition effects',
                pass: styles.transition.includes('all') || styles.transition.includes('transform'),
                details: `Transition: ${styles.transition}`
            });

            // Render test results
            let html = '';
            let passCount = 0;
            tests.forEach(test => {
                if (test.pass) passCount++;
                const className = test.pass ? 'test-pass' : 'test-fail';
                const icon = test.pass ? '‚úÖ' : '‚ùå';
                const details = test.details ? ` (${test.details})` : '';
                html += `<div class="test-item ${className}">${icon} ${test.name}${details}</div>`;
            });

            html = `<div style="margin-bottom: 1rem; font-weight: bold; color: var(--color-turquoise);">
                Passed: ${passCount}/${tests.length}
            </div>` + html;

            output.innerHTML = html;

            // Log summary
            console.log(`‚úÖ Task 4.2 Tests: ${passCount}/${tests.length} passed`);
        });
    </script>
</body>
</html>
