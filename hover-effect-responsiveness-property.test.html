<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Test: Hover Effect Responsiveness</title>
    
    <!-- Load CSS files -->
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/animations.css">
    
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-results {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-pass {
            color: #10b981;
            font-weight: bold;
        }
        .test-fail {
            color: #ef4444;
            font-weight: bold;
        }
        .test-item {
            margin: 10px 0;
            padding: 10px;
            border-left: 3px solid #ccc;
        }
        .test-item.pass {
            border-left-color: #10b981;
            background: #f0fdf4;
        }
        .test-item.fail {
            border-left-color: #ef4444;
            background: #fef2f2;
        }
        h1 {
            color: #0f172a;
        }
        .summary {
            margin-top: 20px;
            padding: 15px;
            background: #f0fdfa;
            border-radius: 4px;
        }
        .test-app {
            margin-top: 20px;
            border: 2px solid #0891b2;
            border-radius: 8px;
            overflow: hidden;
            padding: 20px;
        }
        .test-elements {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="test-results">
        <h1>ðŸ§ª Property-Based Test: Hover Effect Responsiveness</h1>
        <p><strong>Feature:</strong> gozde-eksi-portfolio-website, Property 20: Hover Effect Responsiveness</p>
        <p><strong>Validates:</strong> Requirements 9.2</p>
        <p><strong>Property:</strong> For any interactive element (button, link, card), hovering over the element should trigger visual changes (color, scale, shadow) within a reasonable timeframe.</p>
        <hr>
        <div id="test-output"></div>
        <div id="summary" class="summary"></div>
    </div>

    <!-- Test Application - Sample interactive elements -->
    <div class="test-app">
        <h2>Test Interactive Elements</h2>
        <p>Hover over these elements to see the effects in action</p>
        
        <div class="test-elements">
            <!-- Buttons -->
            <button class="btn btn-primary">Primary Button</button>
            <button class="btn btn-secondary">Secondary Button</button>
            
            <!-- Cards -->
            <div class="card">
                <h3>Card Title</h3>
                <p>Card content</p>
            </div>
            
            <div class="survey-card">
                <h3>Survey Card</h3>
                <p>Survey content</p>
            </div>
            
            <!-- Links -->
            <nav class="navigation">
                <ul class="nav-menu">
                    <li><a href="#" class="nav-link">Nav Link 1</a></li>
                    <li><a href="#" class="nav-link">Nav Link 2</a></li>
                </ul>
            </nav>
            
            <!-- Social Links -->
            <div class="social-link">
                <span>Social Link</span>
            </div>
            
            <!-- Form Input -->
            <input type="text" class="form-input" placeholder="Form Input">
            
            <!-- Expertise Item -->
            <div class="expertise-item">
                <span class="expertise-icon">ðŸŽ“</span>
                <span>Expertise Item</span>
            </div>
            
            <!-- University Link -->
            <div class="university-link">
                <span>University Link</span>
                <span class="link-arrow">â†’</span>
            </div>
            
            <!-- Contact Card -->
            <div class="contact-card">
                <h3>Contact Card</h3>
                <p>Contact info</p>
            </div>
        </div>
    </div>

    <script type="module">
        /**
         * Property-Based Test: Hover Effect Responsiveness
         * Feature: gozde-eksi-portfolio-website, Property 20: Hover Effect Responsiveness
         * 
         * For any interactive element (button, link, card), hovering over the element should 
         * trigger visual changes (color, scale, shadow) within a reasonable timeframe.
         */

        // Interactive element selectors
        const INTERACTIVE_SELECTORS = [
            '.btn',
            '.nav-link',
            '.card',
            '.survey-card',
            '.contact-card',
            '.info-card',
            '.social-link',
            '.university-link',
            '.expertise-item',
            '.form-input'
        ];

        // CSS properties that indicate hover effects
        const HOVER_PROPERTIES = [
            'transform',
            'boxShadow',
            'color',
            'backgroundColor',
            'borderColor',
            'opacity'
        ];

        // Test runner
        const testResults = [];
        let passCount = 0;
        let failCount = 0;
        let animationController;

        function logTest(name, passed, details = '') {
            testResults.push({ name, passed, details });
            if (passed) {
                passCount++;
            } else {
                failCount++;
            }
        }

        // Check if element has hover effect defined in CSS
        function hasHoverEffect(element) {
            const computedStyle = window.getComputedStyle(element);
            
            // Check if element has transition property
            const transitionProperty = computedStyle.transitionProperty;
            const transitionDuration = computedStyle.transitionDuration;
            
            // If element has transitions defined, it likely has hover effects
            if (transitionProperty && transitionProperty !== 'none' && 
                transitionDuration && parseFloat(transitionDuration) > 0) {
                return true;
            }
            
            // Check if element has hover-related classes
            const hoverClasses = ['hover-lift', 'hover-scale', 'btn-ripple', 'transition-all', 'transition-colors', 'transition-transform'];
            const hasHoverClass = hoverClasses.some(className => element.classList.contains(className));
            
            if (hasHoverClass) {
                return true;
            }
            
            return false;
        }

        // Simulate hover and measure response time
        async function simulateHoverAndMeasureTime(element) {
            const startTime = performance.now();
            
            // Get initial styles
            const initialTransform = window.getComputedStyle(element).transform;
            const initialBoxShadow = window.getComputedStyle(element).boxShadow;
            const initialColor = window.getComputedStyle(element).color;
            
            // Dispatch mouseenter event
            const mouseEnterEvent = new MouseEvent('mouseenter', {
                bubbles: true,
                cancelable: true,
                view: window
            });
            element.dispatchEvent(mouseEnterEvent);
            
            // Wait a bit for CSS transitions to start
            await new Promise(resolve => setTimeout(resolve, 50));
            
            // Get styles after hover
            const hoverTransform = window.getComputedStyle(element).transform;
            const hoverBoxShadow = window.getComputedStyle(element).boxShadow;
            const hoverColor = window.getComputedStyle(element).color;
            
            const endTime = performance.now();
            const responseTime = endTime - startTime;
            
            // Check if any visual property changed
            const hasVisualChange = 
                initialTransform !== hoverTransform ||
                initialBoxShadow !== hoverBoxShadow ||
                initialColor !== hoverColor;
            
            // Dispatch mouseleave event
            const mouseLeaveEvent = new MouseEvent('mouseleave', {
                bubbles: true,
                cancelable: true,
                view: window
            });
            element.dispatchEvent(mouseLeaveEvent);
            
            return {
                hasVisualChange,
                responseTime
            };
        }

        // Initialize AnimationController
        async function initAnimationController() {
            const module = await import('../js/animations.js');
            await new Promise(resolve => setTimeout(resolve, 300));
            animationController = window.animationController;
        }

        // Test 1: All interactive elements have hover effects defined
        function testAllInteractiveElementsHaveHoverEffects() {
            let allHaveEffects = true;
            let details = '';
            let testedCount = 0;
            
            INTERACTIVE_SELECTORS.forEach(selector => {
                const elements = document.querySelectorAll(selector);
                
                if (elements.length > 0) {
                    elements.forEach(element => {
                        testedCount++;
                        if (!hasHoverEffect(element)) {
                            allHaveEffects = false;
                            details += `${selector} missing hover effect; `;
                        }
                    });
                }
            });
            
            logTest(`All interactive elements have hover effects (tested ${testedCount} elements)`, 
                allHaveEffects, details);
        }

        // Test 2: Buttons have hover effects with transitions
        function testButtonsHaveHoverEffects() {
            const buttons = document.querySelectorAll('.btn');
            let allHaveEffects = true;
            let details = '';
            
            if (buttons.length === 0) {
                logTest('Buttons have hover effects', false, 'No buttons found');
                return;
            }
            
            buttons.forEach((button, index) => {
                const computedStyle = window.getComputedStyle(button);
                const transitionProperty = computedStyle.transitionProperty;
                const transitionDuration = computedStyle.transitionDuration;
                
                if (transitionProperty === 'none' || parseFloat(transitionDuration) <= 0) {
                    allHaveEffects = false;
                    details += `Button ${index} has no transition; `;
                }
            });
            
            logTest('Buttons have hover effects with transitions', allHaveEffects, details);
        }

        // Test 3: Navigation links have hover effects
        function testNavLinksHaveHoverEffects() {
            const navLinks = document.querySelectorAll('.nav-link');
            let allHaveEffects = true;
            let details = '';
            
            if (navLinks.length === 0) {
                logTest('Navigation links have hover effects', true, 'No nav links found (skipped)');
                return;
            }
            
            navLinks.forEach((link, index) => {
                if (!hasHoverEffect(link)) {
                    allHaveEffects = false;
                    details += `Nav link ${index} missing hover effect; `;
                }
            });
            
            logTest('Navigation links have hover effects', allHaveEffects, details);
        }

        // Test 4: Cards have hover effects
        function testCardsHaveHoverEffects() {
            const cardSelectors = ['.card', '.survey-card', '.contact-card', '.info-card'];
            let allHaveEffects = true;
            let details = '';
            let testedCount = 0;
            
            cardSelectors.forEach(selector => {
                const cards = document.querySelectorAll(selector);
                
                cards.forEach((card, index) => {
                    testedCount++;
                    if (!hasHoverEffect(card)) {
                        allHaveEffects = false;
                        details += `${selector} ${index} missing hover effect; `;
                    }
                });
            });
            
            logTest(`Cards have hover effects (tested ${testedCount} cards)`, allHaveEffects, details);
        }

        // Test 5: Hover effects have reasonable transition durations
        function testHoverEffectsHaveReasonableDurations() {
            let allReasonable = true;
            let details = '';
            
            INTERACTIVE_SELECTORS.forEach(selector => {
                const elements = document.querySelectorAll(selector);
                
                elements.forEach(element => {
                    const computedStyle = window.getComputedStyle(element);
                    const transitionDuration = parseFloat(computedStyle.transitionDuration);
                    
                    if (transitionDuration > 0) {
                        // Duration should be between 0.1s and 1s
                        if (transitionDuration < 0.1 || transitionDuration > 1) {
                            allReasonable = false;
                            details += `${selector} duration ${transitionDuration}s is unreasonable; `;
                        }
                    }
                });
            });
            
            logTest('Hover effects have reasonable transition durations (0.1s - 1s)', allReasonable, details);
        }

        // Test 6: AnimationController initializes hover effects
        function testAnimationControllerInitializesHoverEffects() {
            const exists = animationController !== undefined && animationController !== null;
            
            if (!exists) {
                logTest('AnimationController initializes hover effects', false, 'AnimationController not found');
                return;
            }
            
            const hasMethod = typeof animationController.initHoverEffects === 'function';
            
            logTest('AnimationController initializes hover effects', hasMethod, 
                hasMethod ? 'initHoverEffects method found' : 'initHoverEffects method not found');
        }

        // Test 7: Hover effects respond within reasonable timeframe
        async function testHoverEffectsRespondQuickly() {
            const testElements = [
                document.querySelector('.btn'),
                document.querySelector('.card'),
                document.querySelector('.nav-link')
            ].filter(el => el !== null);
            
            if (testElements.length === 0) {
                logTest('Hover effects respond within reasonable timeframe', false, 'No test elements found');
                return;
            }
            
            let allResponsive = true;
            let details = '';
            
            for (const element of testElements) {
                const result = await simulateHoverAndMeasureTime(element);
                
                // Response time should be under 100ms
                if (result.responseTime > 100) {
                    allResponsive = false;
                    details += `Element responded in ${result.responseTime.toFixed(2)}ms (too slow); `;
                }
            }
            
            logTest('Hover effects respond within reasonable timeframe (<100ms)', allResponsive, details);
        }

        // Test 8: Property test - random element hover checks
        function testRandomElementHoverEffects() {
            const iterations = 100;
            let failures = [];
            
            for (let i = 0; i < iterations; i++) {
                // Pick random selector
                const randomSelector = INTERACTIVE_SELECTORS[Math.floor(Math.random() * INTERACTIVE_SELECTORS.length)];
                const elements = document.querySelectorAll(randomSelector);
                
                if (elements.length > 0) {
                    // Pick random element
                    const randomElement = elements[Math.floor(Math.random() * elements.length)];
                    
                    if (!hasHoverEffect(randomElement)) {
                        failures.push(`Iteration ${i}: ${randomSelector} element missing hover effect`);
                    }
                }
            }
            
            const passed = failures.length === 0;
            logTest(`Property test: ${iterations} random element hover checks`, passed, 
                failures.length > 0 ? failures.slice(0, 5).join('; ') : '');
        }

        // Test 9: Form inputs have hover effects
        function testFormInputsHaveHoverEffects() {
            const formInputs = document.querySelectorAll('.form-input');
            let allHaveEffects = true;
            let details = '';
            
            if (formInputs.length === 0) {
                logTest('Form inputs have hover effects', true, 'No form inputs found (skipped)');
                return;
            }
            
            formInputs.forEach((input, index) => {
                if (!hasHoverEffect(input)) {
                    allHaveEffects = false;
                    details += `Form input ${index} missing hover effect; `;
                }
            });
            
            logTest('Form inputs have hover effects', allHaveEffects, details);
        }

        // Test 10: Social and university links have hover effects
        function testSpecialLinksHaveHoverEffects() {
            const specialLinks = [
                ...document.querySelectorAll('.social-link'),
                ...document.querySelectorAll('.university-link'),
                ...document.querySelectorAll('.expertise-item')
            ];
            
            let allHaveEffects = true;
            let details = '';
            
            if (specialLinks.length === 0) {
                logTest('Special links have hover effects', true, 'No special links found (skipped)');
                return;
            }
            
            specialLinks.forEach((link, index) => {
                if (!hasHoverEffect(link)) {
                    allHaveEffects = false;
                    details += `Special link ${index} missing hover effect; `;
                }
            });
            
            logTest('Special links have hover effects', allHaveEffects, details);
        }

        // Test 11: Hover effects use CSS transitions not JavaScript
        function testHoverEffectsUseCSSTransitions() {
            let allUseCSS = true;
            let details = '';
            
            INTERACTIVE_SELECTORS.forEach(selector => {
                const elements = document.querySelectorAll(selector);
                
                elements.forEach(element => {
                    if (hasHoverEffect(element)) {
                        const computedStyle = window.getComputedStyle(element);
                        const transitionProperty = computedStyle.transitionProperty;
                        const transitionDuration = computedStyle.transitionDuration;
                        
                        if (transitionProperty === 'none' || parseFloat(transitionDuration) <= 0) {
                            allUseCSS = false;
                            details += `${selector} has hover effect but no CSS transition; `;
                        }
                    }
                });
            });
            
            logTest('Hover effects use CSS transitions not JavaScript', allUseCSS, details);
        }

        // Test 12: Multiple hover properties can coexist
        function testMultipleHoverPropertiesCoexist() {
            const testElement = document.querySelector('.btn');
            
            if (!testElement) {
                logTest('Multiple hover properties can coexist', false, 'No button found for testing');
                return;
            }
            
            const computedStyle = window.getComputedStyle(testElement);
            const transitionProperty = computedStyle.transitionProperty;
            
            // Check if multiple properties are transitioned
            const hasMultipleProperties = transitionProperty.includes(',') || transitionProperty === 'all';
            
            logTest('Multiple hover properties can coexist', hasMultipleProperties, 
                hasMultipleProperties ? `Transition properties: ${transitionProperty}` : 'Only single property transitioned');
        }

        // Run all tests
        async function runTests() {
            await initAnimationController();
            
            // Run tests in sequence
            testAllInteractiveElementsHaveHoverEffects();
            testButtonsHaveHoverEffects();
            testNavLinksHaveHoverEffects();
            testCardsHaveHoverEffects();
            testHoverEffectsHaveReasonableDurations();
            testAnimationControllerInitializesHoverEffects();
            await testHoverEffectsRespondQuickly();
            testRandomElementHoverEffects();
            testFormInputsHaveHoverEffects();
            testSpecialLinksHaveHoverEffects();
            testHoverEffectsUseCSSTransitions();
            testMultipleHoverPropertiesCoexist();
            
            // Display results
            const output = document.getElementById('test-output');
            testResults.forEach(result => {
                const div = document.createElement('div');
                div.className = `test-item ${result.passed ? 'pass' : 'fail'}`;
                div.innerHTML = `
                    <span class="${result.passed ? 'test-pass' : 'test-fail'}">
                        ${result.passed ? 'âœ“ PASS' : 'âœ— FAIL'}
                    </span>
                    <strong>${result.name}</strong>
                    ${result.details ? `<br><small>${result.details}</small>` : ''}
                `;
                output.appendChild(div);
            });
            
            // Display summary
            const summary = document.getElementById('summary');
            const totalTests = passCount + failCount;
            const passRate = ((passCount / totalTests) * 100).toFixed(1);
            
            summary.innerHTML = `
                <h3>Test Summary</h3>
                <p><strong>Total Tests:</strong> ${totalTests}</p>
                <p><strong>Passed:</strong> <span class="test-pass">${passCount}</span></p>
                <p><strong>Failed:</strong> <span class="test-fail">${failCount}</span></p>
                <p><strong>Pass Rate:</strong> ${passRate}%</p>
                <p><strong>Status:</strong> ${failCount === 0 ? '<span class="test-pass">ALL TESTS PASSED âœ“</span>' : '<span class="test-fail">SOME TESTS FAILED âœ—</span>'}</p>
            `;
        }

        // Run tests when page loads
        window.addEventListener('load', () => {
            setTimeout(runTests, 500);
        });
    </script>
</body>
</html>
